# STEPS to add new local domain:
# 1. sudo mkcert -key-file /private/etc/apache2/ssl/<YOURNEWSITENAME>.key \
#    -cert-file /private/etc/apache2/ssl/<YOURNEWSITENAME>.crt \
#    "*.<YOURNEWSITENAME>" <YOURNEWSITENAME>
# 2. Add the mapping to /etc/hosts
# 3. sudo dscacheutil -flushcache; sudo killall -HUP mDNSResponder



<VirtualHost *:80>
    ServerName hobbysew.test
    ServerAlias www.hobbysew.test
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:44323/
    ProxyPassReverse / http://127.0.0.1:44323/
</VirtualHost>
<VirtualHost *:443>
    ServerName hobbysew.test
    ServerAlias www.hobbysew.test

    ProxyPreserveHost On
    ProxyRequests Off
    ProxyPass / https://localhost:44323/
    ProxyPassReverse / https://localhost:44323/

    # Enable SSL for the frontend (the browser's connection to Apache)
    SSLEngine on
    SSLCertificateFile "/private/etc/apache2/ssl/hobbysew.test.crt"
    SSLCertificateKeyFile "/private/etc/apache2/ssl/hobbysew.test.key"

    # Enable SSL for the backend (Apache's connection to your .NET app)
    SSLProxyEngine on
    # This is very important for localhost connections to prevent certificate validation errors
    # If your .NET server has a valid certificate, you can remove these
    SSLProxyVerify none
    SSLProxyCheckPeerCN off
    SSLProxyCheckPeerName off
</VirtualHost>


<VirtualHost *:80>
    ServerName cms.hobbysew.test
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:5001/
    ProxyPassReverse / http://127.0.0.1:5001/
</VirtualHost>
<VirtualHost *:443>
    ServerName cms.hobbysew.test

    ProxyPreserveHost On
    ProxyRequests Off
    ProxyPass / https://localhost:5001/
    ProxyPassReverse / https://localhost:5001/

    # Enable SSL for the frontend (the browser's connection to Apache)
    SSLEngine on
    SSLCertificateFile "/private/etc/apache2/ssl/hobbysew.test.crt"
    SSLCertificateKeyFile "/private/etc/apache2/ssl/hobbysew.test.key"

    # Enable SSL for the backend (Apache's connection to your .NET app)
    SSLProxyEngine on
    # This is very important for localhost connections to prevent certificate validation errors
    # If your .NET server has a valid certificate, you can remove these
    SSLProxyVerify none
    SSLProxyCheckPeerCN off
    SSLProxyCheckPeerName off
</VirtualHost>



<VirtualHost *:80>
    ServerName horn.test
    ServerAlias www.horn.test
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:44323/
    ProxyPassReverse / http://127.0.0.1:44323/
</VirtualHost>
<VirtualHost *:443>
    ServerName horn.test
    ServerAlias www.horn.test

    ProxyPreserveHost On
    ProxyRequests Off
    ProxyPass / https://localhost:44323/
    ProxyPassReverse / https://localhost:44323/

    # Enable SSL for the frontend (the browser's connection to Apache)
    SSLEngine on
    SSLCertificateFile "/private/etc/apache2/ssl/horn.test.crt"
    SSLCertificateKeyFile "/private/etc/apache2/ssl/horn.test.key"

    # Enable SSL for the backend (Apache's connection to your .NET app)
    SSLProxyEngine on
    # This is very important for localhost connections to prevent certificate validation errors
    # If your .NET server has a valid certificate, you can remove these
    SSLProxyVerify none
    SSLProxyCheckPeerCN off
    SSLProxyCheckPeerName off
</VirtualHost>


<VirtualHost *:80>
    ServerName cms.horn.test
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:5001/
    ProxyPassReverse / http://127.0.0.1:5001/
</VirtualHost>
<VirtualHost *:443>
    ServerName cms.horn.test

    ProxyPreserveHost On
    ProxyRequests Off
    ProxyPass / https://localhost:5001/
    ProxyPassReverse / https://localhost:5001/

    # Enable SSL for the frontend (the browser's connection to Apache)
    SSLEngine on
    SSLCertificateFile "/private/etc/apache2/ssl/horn.test.crt"
    SSLCertificateKeyFile "/private/etc/apache2/ssl/horn.test.key"

    # Enable SSL for the backend (Apache's connection to your .NET app)
    SSLProxyEngine on
    # This is very important for localhost connections to prevent certificate validation errors
    # If your .NET server has a valid certificate, you can remove these
    SSLProxyVerify none
    SSLProxyCheckPeerCN off
    SSLProxyCheckPeerName off
</VirtualHost>



